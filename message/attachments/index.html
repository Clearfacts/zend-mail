<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="zend-mail">  
    <link rel="canonical" href="https://docs.zendframework.com/zend-mail/message/attachments/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Attachments - zend-mail - Zend Framework Docs</title>

    <link rel="stylesheet" href="../../css/styles-5cfabd53ee.css">
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">zend-mail</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../.." class="subnavigation__link">zend-mail</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../../intro/" class="subnavigation__link">Intro</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Messages</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../intro/" class="subnavigation__link">Intro and Usage</a>
    </li>

            
                
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Attachments</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../character-sets/" class="subnavigation__link">Character Sets</a>
    </li>

            
        </ul>
    </li>

                                    
                                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Transports</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../../transport/intro/" class="subnavigation__link">Usage</a>
    </li>

            
                
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">SMTP</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../../transport/smtp-options/" class="subnavigation__link">SMTP Options</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../transport/smtp-multiple-send/" class="subnavigation__link">Sending multiple messages</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../transport/smtp-authentication/" class="subnavigation__link">Authentication</a>
    </li>

            
        </ul>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../transport/file-options/" class="subnavigation__link">File Transport Options</a>
    </li>

            
        </ul>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../read/" class="subnavigation__link">Reading and Storing Mail</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-mail</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-mail/" class="header__link header__link--github" title="Go to repository of zend-mail">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="laminas-announcement">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                Zend Framework transitions to the Linux Foundation. <a href="https://getlaminas.org">Learn More.</a>
            </div>
        </div>
    </div>
</div>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
    <li><a href="https://framework.zend.com/">Home</a></li>

    
        <li><a href="https://docs.zendframework.com/">Documentation</a></li>

        
            <li><a href="../..">zend-mail</a></li>

            
                
                    
                    
                        <li>Reference</li>
                    
                
            
                
                    
                    
                        <li>Messages</li>
                    
                
            

            <li class="active">Attachments</li>
        
    
</ol>






    
    
        <h2 class="chapter__headline">Messages</h2>
    

    <div>
        
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#basic-multipart-content" class="toc__link">Basic multipart content</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#multipartalternative-content" class="toc__link">multipart/alternative content</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#multipartalternative-emails-with-attachments" class="toc__link">multipart/alternative emails with attachments</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#setting-custom-mime-boundaries" class="toc__link">Setting custom MIME boundaries</a>
                    </li>
                
            </ul>
        </div>
    

    </div>

    <h1 id="adding-attachments">Adding Attachments</h1>
<p>zend-mail does not directly provide the ability to create and use mail
attachments. However, it allows using <code>Zend\Mime\Message</code> instances, from the
<a href="https://github.com/zendframework/zend-mime">zend-mime</a> component, for message
bodies, allowing you to create multipart emails.</p>
<h2 id="basic-multipart-content">Basic multipart content</h2>
<p>The following example creates an email with two parts, HTML content and an
image.</p>
<p> <pre class=codehilite><code class=language-php>use Zend\Mail\Message;
use Zend\Mime\Message as MimeMessage;
use Zend\Mime\Mime;
use Zend\Mime\Part as MimePart;

$html = new MimePart($htmlMarkup);
$html-&gt;type = Mime::TYPE_HTML;
$html-&gt;charset = 'utf-8';
$html-&gt;encoding = Mime::ENCODING_QUOTEDPRINTABLE;

$image = new MimePart(fopen($pathToImage, 'r'));
$image-&gt;type = 'image/jpeg';
$image-&gt;filename = 'image-file-name.jpg';
$image-&gt;disposition = Mime::DISPOSITION_ATTACHMENT;
$image-&gt;encoding = Mime::ENCODING_BASE64;

$body = new MimeMessage();
$body-&gt;setParts([$html, $image]);

$message = new Message();
$message-&gt;setBody($body);

$contentTypeHeader = $message-&gt;getHeaders()-&gt;get('Content-Type');
$contentTypeHeader-&gt;setType('multipart/related');</code></pre></p>
<p>Note that the above code requires us to manually specify the message content
type; zend-mime does not automatically select the multipart type for us, nor
does zend-mail populate it by default.</p>
<h2 id="multipartalternative-content">multipart/alternative content</h2>
<p>One of the most common email types sent by web applications is
<code>multipart/alternative</code> messages with both text and HTML parts.</p>
<p> <pre class=codehilite><code class=language-php>use Zend\Mail\Message;
use Zend\Mime\Message as MimeMessage;
use Zend\Mime\Mime;
use Zend\Mime\Part as MimePart;

$text = new MimePart($textContent);
$text-&gt;type = Mime::TYPE_TEXT;
$text-&gt;charset = 'utf-8';
$text-&gt;encoding = Mime::ENCODING_QUOTEDPRINTABLE;

$html = new MimePart($htmlMarkup);
$html-&gt;type = Mime::TYPE_HTML;
$html-&gt;charset = 'utf-8';
$html-&gt;encoding = Mime::ENCODING_QUOTEDPRINTABLE;

$body = new MimeMessage();
$body-&gt;setParts([$text, $html]);

$message = new Message();
$message-&gt;setBody($body);

$contentTypeHeader = $message-&gt;getHeaders()-&gt;get('Content-Type');
$contentTypeHeader-&gt;setType('multipart/alternative');</code></pre></p>
<p>The only differences from the first example are:</p>
<ul>
<li>We have text and HTML parts instead of an HTML and image part.</li>
<li>The <code>Content-Type</code> header is now <code>multipart/alternative</code>.</li>
</ul>
<h2 id="multipartalternative-emails-with-attachments">multipart/alternative emails with attachments</h2>
<p>Another common task is creating <code>multipart/alternative</code> emails where the HTML
content refers to assets attachments (images, CSS, etc.).</p>
<p>To accomplish this, we need to:</p>
<ul>
<li>Create a <code>Zend\Mime\Part</code> instance containing our <code>multipart/alternative</code>
  message.</li>
<li>Add that part to a <code>Zend\Mime\Message</code>.</li>
<li>Add additional <code>Zend\Mime\Part</code> instances to the MIME message.</li>
<li>Attach the MIME message as the <code>Zend\Mail\Message</code> content body.</li>
<li>Mark the message as <code>multipart/related</code> content.</li>
</ul>
<p>The following example creates a MIME message with three parts: text and HTML
alternative versions of an email, and an image attachment.</p>
<p> <pre class=codehilite><code class=language-php>use Zend\Mail\Message;
use Zend\Mime\Message as MimeMessage;
use Zend\Mime\Mime;
use Zend\Mime\Part as MimePart;

$body = new MimeMessage();

$text           = new MimePart($textContent);
$text-&gt;type     = Mime::TYPE_TEXT;
$text-&gt;charset  = 'utf-8';
$text-&gt;encoding = Mime::ENCODING_QUOTEDPRINTABLE;

$html           = new MimePart($htmlMarkup);
$html-&gt;type     = Mime::TYPE_HTML;
$html-&gt;charset  = 'utf-8';
$html-&gt;encoding = Mime::ENCODING_QUOTEDPRINTABLE;

$content = new MimeMessage();
// This order is important for email clients to properly display the correct version of the content
$content-&gt;setParts([$text, $html]);

$contentPart = new MimePart($content-&gt;generateMessage());

$image              = new MimePart(fopen($pathToImage, 'r'));
$image-&gt;type        = 'image/jpeg';
$image-&gt;filename    = 'image-file-name.jpg';
$image-&gt;disposition = Mime::DISPOSITION_ATTACHMENT;
$image-&gt;encoding    = Mime::ENCODING_BASE64;

$body = new MimeMessage();
$body-&gt;setParts([$contentPart, $image]);

$message = new Message();
$message-&gt;setBody($body);

$contentTypeHeader = $message-&gt;getHeaders()-&gt;get('Content-Type');
$contentTypeHeader-&gt;setType('multipart/related');</code></pre></p>
<h2 id="setting-custom-mime-boundaries">Setting custom MIME boundaries</h2>
<p>In a multipart message, a MIME boundary for separating the different parts of
the message is normally generated at random. In some cases, however, you might
want to specify the MIME boundary that is used. This can be done by injecting a
new <code>Zend\Mime\Mime</code> instance into the MIME message.</p>
<p> <pre class=codehilite><code class=language-php>use Zend\Mime\Mime;

$mimeMessage-&gt;setMime(new Mime($customBoundary));</code></pre></p>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../intro/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../character-sets/">
                    Next <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/zendframework/zend-mail/edit/master/docs/book/message/attachments.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">zend-mail</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../.." class="subnavigation__link">zend-mail</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../../intro/" class="subnavigation__link">Intro</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Messages</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../intro/" class="subnavigation__link">Intro and Usage</a>
    </li>

            
                
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Attachments</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../character-sets/" class="subnavigation__link">Character Sets</a>
    </li>

            
        </ul>
    </li>

                                    
                                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Transports</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../../transport/intro/" class="subnavigation__link">Usage</a>
    </li>

            
                
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">SMTP</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../../transport/smtp-options/" class="subnavigation__link">SMTP Options</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../transport/smtp-multiple-send/" class="subnavigation__link">Sending multiple messages</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../transport/smtp-authentication/" class="subnavigation__link">Authentication</a>
    </li>

            
        </ul>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../transport/file-options/" class="subnavigation__link">File Transport Options</a>
    </li>

            
        </ul>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../read/" class="subnavigation__link">Reading and Storing Mail</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2019 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://tinyletter.com/mwopzend" class="support__link" title="Newsletter"><i class="fa fa-envelope"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script>
        var base_url = '../..',
            siteName = 'zend-mail';
    </script>
    <script src="../../js/scripts-8d7ae56abf.js"></script>
        <script src="../../search/main.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>



</body>


</html>
